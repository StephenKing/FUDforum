<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Id: installation.xml,v 1.7 2006/11/10 15:32:20 hackie Exp $ -->
<chapter id="installation">
	<title>Installation</title>
	
	<sect1 id="install.verify.config">
		<title>Verifying your system configuration</title>
		
		<para>
			Before proceeding with the installation process it is recommended that you determine that you have all of the software needed 
			for the operation of FUDforum. If you would like to install FUDforum utilizing the MySQL backend you will need
			to make sure you system has PHP 4.0 or greater and MySQL 3.23 or greater installed. If you decide to use the
			PostgreSQL backend you will need PostgreSQL 7.2 or greater and PHP 4.2.0 or greater. It is always 
			recommended that you have the latest stable version of the software you are using, since each release often fixes many
			critical bugs. This is particularly true for MySQL where throughout 3.23 release there were numerous fixes 
			for index resolving which would definitely benefit your forum.
		</para>
		
		<para>
			If you do not already know what PHP, MySQL or PostgreSQL version your server is running or 
			wish to verify the information that you have,you can determine the version information by doing the following:
			
			<example>
				<title>Finding out PHP version</title>
<programlisting>
<![CDATA[
<?php
	echo "PHP Version: ".phpversion()."<br>\n";
?>
]]>
</programlisting>
			</example>

			<example>
				<title>Finding out MySQL version</title>
<programlisting>
<![CDATA[
<?php
	mysql_connect("127.0.0.1", "USER_NAME", "PASSWORD");
	$result = mysql_query("SELECT VERSION()");
	list($mysql_version) = mysql_fetch_row($result);
	echo "MySQL Version: ".$mysql_version."<br>\n";
	mysql_free_result($result);
?>
]]>
</programlisting>
			</example>
			
			<example>
				<title>Finding out PostgreSQL version</title>
<programlisting>
<![CDATA[
<?php
	$conn = pg_connect("host=localhost user=USERNAME password=PASSWORD");
	$result = pg_query($conn, "SELECT VERSION()");
	list($pg_version) = pg_fetch_row($result);
	echo "PostgreSQL Version: ".$pg_version."<br>\n";
	pg_free_result($result);
?>
]]>
</programlisting>
			</example>
		</para>
		
		<para>
			If you find that the software on your server is older then the one needed for proper
			installion of FUDforum, you can download the needed programs from the web, the urls
			are listed below.
			MySQL, PostgreSQL &amp; PHP are Open Source and you can download and use them for free,
			without paying any fees regardless of whether you use them for commercial or personal use.
			<itemizedlist>
				<listitem><para><emphasis role="bold">MySQL</emphasis> <ulink url="http://www.mysql.com/">http://www.mysql.com/</ulink></para></listitem>
				<listitem><para><emphasis role="bold">PostgreSQL</emphasis> <ulink url="http://www.postgresql.org/">http://www.postgresql.org/</ulink></para></listitem>
				<listitem><para><emphasis role="bold">PHP</emphasis> <ulink url="http://www.php.net/">http://www.php.net/</ulink></para></listitem>
			</itemizedlist>
		</para>
	</sect1>
	
	<sect1 id="install.fudforum.sources">
		<title>Downloading FUDforum</title>
		<para>
			If you did not download the sources of FUDforum, you can do so by going to <ulink url="http://fud.prohost.org/download.php">http://fud.prohost.org/download.php</ulink>. 
			That page will always contain the latest stable version of FUDforum as well as the latest development version if 
			you want the very latest features.
			FUDforum is always offered in 3 compression formats, bzip2, gzip &amp; zip, so you should not have any
			problems decompressing the install script on any system. 
			We recommend downloading the bzip2 file, as it is the smallest and will take the shortest amount 
			of time to download.
		</para>
		
		<para>
			FUDforum sources can also be obtained from <acronym>CVS</acronym> (Concurrent Version System).
			<example>
				<title>Downloading FUDforum from CVS</title>
			        <programlisting>
<![CDATA[
cvs -z3 -d :pserver:anonymous@asuka.prohost.org:/forum21 checkout fud21_install
]]>
Once the files are retrieved, run the following commands to create the install script
<![CDATA[
cd fud21_install
chmod 644 install.php
chmod 755 create_file_list
./create_file_list install 1>> install.php
]]>
                                </programlisting>
			</example>
			<note>
				<simpara>
				You will need to have php binary installed on your system in order to generate the install.php installation script.
				If you already have a php binary in your system, but it is not inside <literal>/usr/local/bin/php</literal>, modify the
				1st line inside the install.php script to reflect the proper path of the php binary on your system.
				</simpara>
			</note>
			
			<note>	
				<simpara>
				If you want a smaller install script and have php compiled with zlib module, you can pass a 2nd argument to
				the create_file_list script, which would compress the archive data. This will result in a file that is 
				approximately 1/3 the size.
				</simpara>
			</note>
		</para>
	</sect1>
	
	<sect1 id="install.script">
		<title>Installing FUDforum</title>
		
		<para>
			Now that you have the FUDforum installation script, install.php, copy the script into a web 
			browseable directory. It is recommended to copy the script into the web directory where you 
			intend to install the forum. 
			To begin the installation of the forum, use your browser to access the install.php file.
		</para>
		
		<para>
			Once you've accessed the script, you will see the 1st step of the installation wizard, which consists
			of five steps.
		</para>	
		
		<sect2 id="install.wizard.step1">
			<title>Step #1: Path of System Files and Directories</title>
			<para>
				During the 1st step of the FUDforum installation, you get the opportunity to specify where you want the forum's
				files to be installed, as well as the URL of the forum. The install script will automatically put some 
				default values for the options asked, you can use those values, or you can change them.
			</para>
				
			<important>
				<simpara>
				If your PHP has safe_mode enabled, you'll see an indicator that it is enabled in red on top of the install wizard.
				If safe_mode is enabled, you <emphasis role="bold">CAN NOT</emphasis> use specify the directory 
				where you've placed install.php as 
				<link linkend="install.step1.server_root">Server Root</link> or 
				<link linkend="install.step1.forum_data_root">Forum Data Root</link>. 
				</simpara>
			</important>	
				
			<sect3 id="install.step1.server_root">
				<title>Server Root</title>
				<para>
					The Server Root option allows you to specify the directory path where the 
					forum's browseable files will be stored on your server's hard-drive.
					You will need to specify the full path to the directory. For example: 
					<programlisting>
<![CDATA[
*NIX: /home/user/public_html/forum/
Windows: c:\\web\\my website\\forum\\
]]>
					</programlisting>
					<note>
					<simpara>
						You need to enter \\ as directory separator on Windows because normally, \ is 
						interpreted as an escape character. Since PHP is smart enough to convert / to \ 
						internally, on Windows, you may want to use / as the directory separator and save yourself 
						the hassle of having to deal with \\.
					</simpara>
					</note>
				</para>
			</sect3>
			
			<sect3 id="install.step1.forum_data_root">
				<title>Forum Data Root</title>
			        <para>
			        	This is the location on your server's hard-drive where the forum's data files will be stored. It is 
			        	<emphasis role="bold">highly</emphasis> recommended not to keep this directory inside a web browseable 
			        	directory, since sensitive files such as messages bodies will be stored in it. For example:
					<programlisting>
<![CDATA[
*NIX: /home/user/public_html/forum/
Windows: c:\\web\\my website\\forum\\
]]>
					</programlisting>					
					<note>
					<simpara>
						You need to enter \\ as directory separator on Windows because normally, \ is 
						interpreted as an escape character. Since PHP is smart enough to convert / to \ 
						internally, on Windows, you may want to use / as the directory separator and save yourself 
						the hassle of having to deal with \\.
					</simpara>
					</note>
				</para>
				
				<para>
					If you for whatever reason, you choose to keep this directory in a location where it can be accessed with a web 
					browser, consider using your webserver's security settings to block access to regular users to this directory.
					For example, .htaccess rules on Apache such as:
					<example>
						<title>Securing directory with .htaccess</title>
						<programlisting>
<![CDATA[
<Location />
	Order Deny,Allow
	Deny from all
</Location>
]]>
						</programlisting>
					</example>	
				</para>
			</sect3>	
			
			<important>
				<simpara>
					The directories that you have specified as <link linkend="install.step1.server_root">Forum Data Root</link> and <link linkend="install.step1.forum_data_root">Server Root</link>
					must exist and the webserver must have the permission to write to those directories before you click on the next link on the install wizard.
				</simpara>
				
				<simpara>
					On *NIX systems there are several ways you can assign proper permissions to the directories you intend to use.
					The simplest method is to run command <literal>chmod 777 /home/user/directory</literal> in your shell account.
				</simpara>
				
				<simpara>
					If you do not not have a shell account you can assign proper permissions to a directory by using your FTP client.
					<example>
						<title>Changing permissions with CuteFTP</title>
						
						<orderedlist>
							<listitem><para>Select the directory</para></listitem>
							<listitem><para>Press CTRL+SHIFT+A</para></listitem>
							<listitem><para>Enter 777 in the manual textbox</para></listitem>
							<listitem><para>Press OK</para></listitem>
						</orderedlist>
					</example>
					
					<example>
						<title>Changing permissions with WS_FTP</title>
						
						<orderedlist>
							<listitem><para>Right click on the directory</para></listitem>
							<listitem><para>Choose the chmod UNIX option</para></listitem>
							<listitem><para>In the dialog that appeared check all the checkboxes</para></listitem>
							<listitem><para>Press OK</para></listitem>
						</orderedlist>	
					</example>
				</simpara>
			</important>
			
			<sect3 id="install.step1.forum_www_root">
				<title>Forum WWW Root</title>
				
				<para>
					Enter the URL to your forum, after the forum is installed, visitors will be able to access the forum by
					going to this URL. Any files places inside <link linkend="install.step1.server_root">Server Root</link> 
					should be accessible by going to this URL.
				</para>
			</sect3>
			
			<para>
				Once you've entered all the values, click on the next link to proceed 
				to <link linkend="install.wizard.step2">step #2</link> of the installation.
			</para>
		</sect2>
		
		<sect2 id="install.wizard.step2">
			<title>Step #2: Database Settings</title>
			
			<para>
				Now that the forum's files were successfully decompressed, you will now need to 
				specify the database settings for your forum. 
			</para>
			
			<sect3 id="install.step2.db_type">
				<title>Database Type</title>
				
				<para>
					Which database system to use to store the forum's data, MySQL or PostgreSQL.
				</para>
			</sect3>
			
			<sect3 id="install.step2.db_server">
				<title>Database Server</title>
				
				<para>
					This is the IP address or a UNIX domain socket that will be used to connect
					to the database server you intend to use.
				</para>
				
				<note>
					<simpara>
					For optimal performance, we recommend using UNIX domain sockets.
					</simpara>
				</note>
				
				<example>
					<title>Database Server</title>
					<screen>Standard IP 127.0.0.1</screen>
					<screen>UNIX Domain Socket :/tmp/mysql.sock</screen>
				</example>
			</sect3>
			
			<sect3 id="install.step2.db_login">
				<title>Database Login</title>
				
				<para>
					Login name for your database account.
				</para>
			</sect3>
			
			<sect3 id="install.step2.db_paswd">
				<title>Database Password</title>
				
				<para>
					Password for your database account.
				</para>
			</sect3>
			
			<sect3 id="install.step2.db_db">
				<title>Database Name</title>
				
				<para>
					The name of the database, where the forum's data will be stored.
				</para>
			</sect3>
			
			<sect3 id="install.step2.db_prefix">
				<title>FUDforum SQL Table Prefix</title>
				
				<para>
					A alphanumeric string that will be prepended to all FUDforum's table names.
					This is done to prevent conflicts with your existing tables, which may
					share same names as the tables used by FUDforum. As well as allow you to
					install multiple forums into a single SQL database by specifying 
					a different prefix.
				</para>
				
				<para>
					By default, this option has a value of "fud2_", if you are not sure, leave this value as is.
				</para>
			</sect3>
		</sect2>
		
		<sect2 id="install.wizard.step3">
			<title>Step #3: Cookie Domain</title>
			
			<para>
				Cookies are little bits of information that are stored on the user's computer, which
				are sent by the browser to the website which set them. Unless otherwise specified, &FUDforum;
				uses cookies to track the currently logged in users, thus the user is not required to login every
				time.
			</para>
			
			<para>
				In order for the cookie to be set properly it needs to have a correct domain specified
				for which you are sending a cookie. The installation script automatically figures out 
				the most optimal cookie domain based on the URL you've entered in 
				<link linkend="install.step1.forum_www_root">step #1</link>.
			</para>
			
			<para>
				If you decide to change this value <emphasis role="bold">make sure</emphasis> the domain
				has no less the 2 '.' in it, for example:
				<screen>.mydomain.com</screen>
				This is necessary because many browsers will not accept a cookie unless the domain 
				has at least 2 dots in it.
			</para>
			
			<note>
				<simpara>
				Due to the nature of cookies, cookies cannot be set for IP address' or domains without
				any dot's in them. In this case, the forum will revert to using URL based sessions to
				keep track of users. The downside of this, is that after certain period of inactivity,
				usually 30 minutes, the session will expire and the user will be required to re-login.
				</simpara>
			</note>
		</sect2>
		
		<sect2 id="install.wizard.step4">
			<title>Step #4: Forum Language</title>
			
			<para>
				In this step you get to choose the language that your forum will be in, 
				the list of available languages is listed in the select box. This setting is not
				permanent and if you so desire you will be able to change it later once the forum has been
				installed.
			</para>
		</sect2>
		
		<sect2 id="install.wizard.step5">
			<title>Step #5: Admin Account</title>
			
			<para>
				The last step of the installer involves the creation of the 1st administrator
				account. You will need to enter the login name, password and the email address
				into the specified text boxes.
			</para>
			
			<note>
				<simpara>
				You will be able to make additional Administrators once the forum is installed.
				</simpara>
			</note>
		</sect2>
		
		<sect2 id="install.wizard.finish">
			<title>Installation Complete</title>
				
			<para>
				The forum installation has now been completed, if you click on the next button
				you will be taken to a login form that will allow you to login into the 
				administrator account you've created on <link linkend="install.wizard.step5">step #5</link>
			</para>		
			
			<important>
				<simpara>
				It is of <emphasis role="bold">critical importance</emphasis> that you remove 
				the <emphasis role="bold">install.php</emphasis> file once the installation process has been completed. 
				Otherwise someone could re-install over the forum you have created.
				</simpara>
			</important>
		</sect2>
	</sect1>
</chapter>
